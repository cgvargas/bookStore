{# templates/admin/index.html #}
{% extends "admin/index.html" %}
{% load static i18n %}

{% block content %}
<div id="content-main">
    {% if app_list %}
        {% for app in app_list %}
            <div class="app-{{ app.app_label }} module{% if app.app_url in request.path %} current{% endif %}">
                <table>
                    <caption>
                        <a href="{{ app.app_url }}" class="section" title="Modelos em {{ app.name }}">{{ app.name }}</a>
                    </caption>
                    {% for model in app.models %}
                        <tr class="model-{{ model.object_name|lower }}{% if model.admin_url in request.path %} current{% endif %}">
                            <th scope="row"><a href="{% firstof model.admin_url model.add_url '#' %}">{{ model.name }}</a></th>
                            <td><a href="{% firstof model.add_url '#' %}" class="addlink">Adicionar</a></td>
                            {% if model.admin_url %}
                                <td><a href="{{ model.admin_url }}" class="changelink">Alterar</a></td>
                            {% else %}
                                <td></td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                </table>
            </div>
        {% endfor %}

        {# Seção de Ferramentas do Sistema #}
        <div class="module">
            <table>
                <caption>
                    <span class="section">Ferramentas do Sistema</span>
                </caption>
                <tr>
                    <th scope="row">
                        <a href="{% url 'admin:generate-schema' %}"
                           onclick="return confirm('Deseja gerar o schema do banco de dados?')">
                            📊 Gerar Schema do Banco
                        </a>
                    </th>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <th scope="row">
                        <a href="{% url 'admin:generate-structure' %}"
                           onclick="return confirm('Deseja gerar a estrutura do projeto?')">
                            📁 Gerar Estrutura do Projeto
                        </a>
                    </th>
                    <td></td>
                    <td></td>
                </tr>
                {# Seção de Limpeza de Pastas #}
                <tr>
                    <th scope="row">
                        <a href="{% url 'admin:clear-folders' %}"
                           onclick="return confirm('Deseja limpar o conteúdo de TODAS as pastas do sistema?')">
                            🗑️ Limpar Todas as Pastas
                        </a>
                    </th>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <th scope="row">
                        <a href="{% url 'admin:clear-schema-folder' %}"
                           onclick="return confirm('Deseja limpar apenas a pasta de schemas?')">
                            🗑️ Limpar Pasta de Schemas
                        </a>
                    </th>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <th scope="row">
                        <a href="{% url 'admin:clear-structure-folder' %}"
                           onclick="return confirm('Deseja limpar apenas a pasta de estrutura do projeto?')">
                            🗑️ Limpar Pasta de Estrutura
                        </a>
                    </th>
                    <td></td>
                    <td></td>
                </tr>
            </table>
        </div>
    {% else %}
        <p>Você não tem permissão para visualizar ou editar nada.</p>
    {% endif %}
</div>
{% endblock %}

{% block sidebar %}
{{ block.super }}
{% endblock %}